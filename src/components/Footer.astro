---
import { SOCIAL_LINKS, STUDIO_EMAIL_MAILTO } from '../constants/contacts';

const currentYear = new Date().getFullYear();

const socialLinks = [
  ...SOCIAL_LINKS.map(social => ({
    name: social.label,
    href: social.href,
    icon: social.icon || social.id,
    ariaLabel: social.ariaLabel
  })),
  {
    name: 'Email',
    href: STUDIO_EMAIL_MAILTO,
    icon: 'email',
    ariaLabel: 'Send us an email'
  }
];

const footerLinks = [
  {
    title: 'Explore',
    links: [
      { name: 'About Us', href: '/about' },
      { name: 'Academy', href: '/academy' },
      { name: 'Upcoming Events', href: '/events' },
      { name: 'Gallery', href: '/gallery' }
    ]
  },
  {
    title: 'Connect',
    links: [
      { name: 'Contact Us', href: '/contacts' },
      { name: 'Book a Session', href: '/contacts#booking' },
      { name: 'Join Our Community', href: '#' },
      { name: 'Newsletter', href: '#newsletter' }
    ]
  }
];
---

<footer class="footer">
  <div class="container">
    <div class="footer__content">
      <!-- Logo and Description -->
      <div class="footer__brand">
        <img 
          src="/images/logo.svg" 
          alt="Singapore Handpan Studio" 
          class="footer__logo"
          width="60"
          height="60"
        />
        <p class="footer__description">
          Discover the healing sounds of handpan music through our events, academy, and community in Singapore.
        </p>
        
        <!-- Social Links -->
        <div class="footer__social">
          <span class="footer__social-title">Follow Us</span>
          <div class="social-links">
            {socialLinks.map((social) => (
              <a 
                href={social.href}
                class="social-link"
                aria-label={social.ariaLabel}
                target="_blank"
                rel="noopener noreferrer"
              >
                <svg class="social-icon" aria-hidden="true">
                  <use href={`/icons/sprite.svg#${social.icon}`}></use>
                </svg>
              </a>
            ))}
          </div>
        </div>
      </div>

      <!-- Footer Links -->
      <div class="footer__links">
        {footerLinks.map((section) => (
          <div class="footer__section">
            <h3 class="footer__section-title">{section.title}</h3>
            <ul class="footer__section-links">
              {section.links.map((link) => (
                <li>
                  <a href={link.href} class="footer__link">
                    {link.name}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>

    <!-- Footer Bottom -->
    <div class="footer__bottom">
      <div class="footer__bottom-content">
        <p class="footer__copyright">
          Â© {currentYear} Singapore Handpan Studio. All rights reserved.
        </p>
        
        <div class="footer__legal">
          <a href="/privacy" class="footer__legal-link">Privacy Policy</a>
          <a href="/terms" class="footer__legal-link">Terms of Service</a>
        </div>
      </div>
    </div>
  </div>
</footer>

<style lang="scss">
.footer {
  background-color: var(--color-gray-900);
  color: var(--color-gray-200);
  margin-top: auto;
}

.footer__content {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-12);
  padding: var(--space-16) 0;

  @media (min-width: 768px) {
    grid-template-columns: 2fr 1fr;
    gap: var(--space-16);
    padding: var(--space-20) 0;
  }

  @media (min-width: 1024px) {
    grid-template-columns: 1fr 1fr 1fr;
  }
}

.footer__brand {
  @media (min-width: 1024px) {
    grid-column: 1 / 2;
  }
}

.footer__logo {
  width: 50px;
  height: 50px;
  object-fit: contain;
  margin-bottom: var(--space-4);
  filter: brightness(0) invert(1);
  
  @media (min-width: 768px) {
    width: 60px;
    height: 60px;
  }
}

.footer__description {
  font-size: var(--font-size-sm);
  line-height: var(--line-height-relaxed);
  color: var(--color-gray-300);
  margin-bottom: var(--space-6);
  max-width: 300px;
}

.footer__social {
  margin-bottom: var(--space-8);
}

.footer__social-title {
  display: block;
  font-weight: var(--font-weight-medium);
  margin-bottom: var(--space-3);
  color: var(--color-white);
}

.social-links {
  display: flex;
  gap: var(--space-4);
}

.social-link {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background-color: var(--color-gray-800);
  border-radius: var(--radius-lg);
  color: var(--color-gray-300);
  transition: all var(--transition-fast);

  &:hover {
    background-color: var(--color-primary);
    color: var(--color-white);
    transform: translateY(-2px);
  }

  &:focus {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }
}

.social-icon {
  width: 20px;
  height: 20px;
  fill: currentColor;
}

.footer__links {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-8);

  @media (min-width: 640px) {
    grid-template-columns: 1fr 1fr;
  }

  @media (min-width: 1024px) {
    grid-column: 2 / 4;
    grid-template-columns: 1fr 1fr;
  }
}

.footer__section-title {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--color-white);
  margin-bottom: var(--space-4);
}

.footer__section-links {
  list-style: none;
  margin: 0;
  padding: 0;
}

.footer__section-links li {
  margin-bottom: var(--space-2);
}

.footer__link {
  color: var(--color-gray-300);
  text-decoration: none;
  font-size: var(--font-size-sm);
  transition: color var(--transition-fast);

  &:hover {
    color: var(--color-primary-light);
  }

  &:focus {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: var(--radius-sm);
  }
}

.footer__bottom {
  border-top: 1px solid var(--color-gray-800);
  padding: var(--space-6) 0;
}

.footer__bottom-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-4);

  @media (min-width: 768px) {
    flex-direction: row;
    justify-content: space-between;
  }
}

.footer__copyright {
  font-size: var(--font-size-sm);
  color: var(--color-gray-400);
  margin: 0;
}

.footer__legal {
  display: flex;
  gap: var(--space-6);
}

.footer__legal-link {
  font-size: var(--font-size-sm);
  color: var(--color-gray-400);
  text-decoration: none;
  transition: color var(--transition-fast);

  &:hover {
    color: var(--color-gray-200);
  }

  &:focus {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: var(--radius-sm);
  }
}
</style>
